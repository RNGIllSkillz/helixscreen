<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- LED Control Overlay: Full-width overlay for controlling LED strips -->
<!-- Sections auto-hide based on available backends -->
<component>
  <api>
    <prop name="title" type="string" default="LED Control"/>
  </api>
  <!-- Component-local constants -->
  <px name="preset_swatch_size" value="40"/>
  <view name="led_control_overlay"
        extends="overlay_panel" width="#overlay_panel_width_full" title="$title" bg_color="#screen_bg">
    <!-- Scrollable content area -->
    <lv_obj name="content_area"
            width="100%" flex_grow="1"
            style_pad_all="#space_lg" style_pad_top="0"
            flex_flow="column" style_pad_gap="#space_md" style_overflow="scroll">

      <!-- Active strip name + selector chips on one row -->
      <lv_obj name="strip_header" width="100%" height="content" flex_flow="row"
              style_pad_all="0" style_flex_cross_place="center" style_pad_gap="#space_md">
        <text_heading name="strip_name_label" text="LED" bind_text="led_active_strip_name"/>
        <!-- Chips container: width="1" forces flex_grow to set actual width (LVGL wrapping quirk) -->
        <lv_obj name="strip_selector_section" width="1" flex_grow="1" height="content"
                flex_flow="row_wrap" style_pad_gap="#space_sm" style_flex_main_place="end"
                style_flex_cross_place="center" style_pad_all="0">
        </lv_obj>
      </lv_obj>

      <divider_horizontal name="divider_strip_header"/>

      <!-- Native color section -->
      <lv_obj name="native_section" width="100%" flex_flow="column" style_pad_gap="#space_md"
              style_pad_all="0">

        <!-- Color + current swatch + Presets + preset swatches â€” one wrapping row -->
        <lv_obj name="color_presets_container" width="100%" flex_flow="row_wrap"
                style_pad_gap="#space_sm" style_flex_cross_place="center"
                style_pad_all="0">
          <text_small text="Color" style_text_color="#text_secondary"/>
          <lv_obj name="current_color_swatch" width="#preset_swatch_size" height="#preset_swatch_size"
                  style_radius="#border_radius" style_bg_opa="255"
                  style_border_width="#border_width" style_border_color="#border"
                  style_border_opa="#border_opacity" scrollable="false"/>
          <lv_obj flex_grow="1" style_pad_all="0" width="1" height="1"/>
          <text_small text="Presets" style_text_color="#text_secondary"/>
          <led_color_swatch name="swatch_white"     swatch_color="0xFFFFFF"/>
          <led_color_swatch name="swatch_warm"      swatch_color="0xFFD700"/>
          <led_color_swatch name="swatch_orange"    swatch_color="0xFF6B35"/>
          <led_color_swatch name="swatch_blue"      swatch_color="0x4FC3F7"/>
          <led_color_swatch name="swatch_red"       swatch_color="0xFF4444"/>
          <led_color_swatch name="swatch_green"     swatch_color="0x66BB6A"/>
          <led_color_swatch name="swatch_purple"    swatch_color="0x9C27B0"/>
          <led_color_swatch name="swatch_cyan"      swatch_color="0x00BCD4"/>
          <ui_button name="custom_color_btn" variant="outline" height="#preset_swatch_size" focusable="false">
            <text_small text="Custom"/>
            <event_cb trigger="clicked" callback="led_custom_color_cb"/>
          </ui_button>
        </lv_obj>

        <!-- Turn Off button + brightness (label + slider) on same row -->
        <lv_obj width="100%" flex_flow="row" style_pad_gap="#space_lg"
                style_pad_all="0" style_pad_left="#space_lg" style_pad_right="#space_lg"
                style_flex_cross_place="center">
          <ui_button name="native_turn_off_btn" variant="danger" height="#button_height" text="Turn Off" focusable="false">
            <event_cb trigger="clicked" callback="led_native_turn_off_cb"/>
          </ui_button>
          <lv_obj width="#space_sm" height="1" style_pad_all="0"/>
          <lv_obj flex_grow="1" flex_flow="column" style_pad_gap="#space_xs" style_pad_all="0"
                    style_pad_left="#space_lg" style_pad_right="#space_lg"
                    style_pad_bottom="#space_md">
            <lv_obj width="100%" flex_flow="row" style_pad_all="0"
                    style_flex_main_place="space_between" style_flex_cross_place="center">
              <text_small text="Brightness" style_text_color="#text_secondary"/>
              <text_small name="brightness_label" bind_text="led_brightness_text"
                          style_text_color="#text_secondary"/>
            </lv_obj>
            <lv_slider name="brightness_slider" width="100%"
                       range_min="0" range_max="100" value="100">
              <event_cb trigger="value_changed" callback="led_brightness_changed_cb"/>
            </lv_slider>
          </lv_obj>
        </lv_obj>
      </lv_obj>

      <!-- Effects section (tied to selected strip) -->
      <lv_obj name="effects_section" width="100%" flex_flow="column" style_pad_gap="#space_sm"
              style_pad_all="0">
        <text_small text="Effects" style_text_color="#text_secondary"/>
        <lv_obj name="effects_container" width="100%" flex_flow="row_wrap"
                style_pad_gap="#space_sm" style_flex_main_place="center" style_pad_all="0">
          <!-- Effect chips created dynamically via led_action_chip -->
        </lv_obj>
      </lv_obj>

      <divider_horizontal name="divider_effects_wled"/>

      <!-- WLED section -->
      <lv_obj name="wled_section" width="100%" flex_flow="column" style_pad_gap="#space_sm"
              style_pad_all="0">
        <text_small text="WLED" style_text_color="#text_secondary" style_pad_bottom="#space_xs"/>

        <!-- Turn Off/On button + brightness (label + slider) on same row -->
        <lv_obj width="100%" flex_flow="row" style_pad_gap="#space_lg"
                style_pad_all="0" style_pad_left="#space_lg" style_pad_right="#space_lg"
                style_flex_cross_place="center">
          <ui_button name="wled_turn_off_btn" variant="danger" height="#button_height" text="Turn Off" focusable="false">
            <event_cb trigger="clicked" callback="led_wled_toggle_cb"/>
          </ui_button>
          <lv_obj width="#space_sm" height="1" style_pad_all="0"/>
          <lv_obj flex_grow="1" flex_flow="column" style_pad_gap="#space_xs" style_pad_all="0"
                    style_pad_left="#space_lg" style_pad_right="#space_lg"
                    style_pad_bottom="#space_md">
            <lv_obj width="100%" flex_flow="row" style_pad_all="0"
                    style_flex_main_place="space_between" style_flex_cross_place="center">
              <text_small text="Brightness" style_text_color="#text_secondary"/>
              <text_small name="wled_brightness_label" bind_text="led_wled_brightness_text"
                          style_text_color="#text_secondary"/>
            </lv_obj>
            <lv_slider name="wled_brightness_slider" width="100%"
                       range_min="0" range_max="100"
                       bind_value="led_wled_brightness"/>
          </lv_obj>
        </lv_obj>

        <!-- Presets (below brightness) -->
        <text_small text="Presets" style_text_color="#text_secondary"/>
        <lv_obj name="wled_presets_container" width="100%" flex_flow="row_wrap"
                style_pad_gap="#space_sm" style_flex_main_place="center" style_pad_all="0">
          <!-- WLED preset chips created dynamically via led_action_chip -->
        </lv_obj>
      </lv_obj>

      <divider_horizontal name="divider_wled_macro"/>

      <!-- Macro section -->
      <lv_obj name="macro_section" width="100%" flex_flow="column" style_pad_gap="#space_sm"
              style_pad_all="0">
        <text_small text="Macros" style_text_color="#text_secondary" style_pad_bottom="#space_xs"/>
        <lv_obj name="macro_buttons_container" width="100%" flex_flow="row_wrap"
                style_pad_gap="#space_sm" style_flex_main_place="center" style_pad_all="0">
          <!-- Macro chips created dynamically via led_action_chip -->
        </lv_obj>
      </lv_obj>

    </lv_obj>
  </view>
</component>
